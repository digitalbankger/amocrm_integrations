{"version":3,"file":"js/701.9b04c7b3.js","mappings":"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","sources":["webpack://my-vue-app/./src/components/CatalogItems.vue","webpack://my-vue-app/./src/components/ui/ArchiveItems.vue","webpack://my-vue-app/./src/services/tokenService.js","webpack://my-vue-app/./src/services/api/api.js","webpack://my-vue-app/./src/components/ui/ArchiveItems.vue?329d","webpack://my-vue-app/./src/components/CatalogItems.vue?cc18"],"sourcesContent":["<template>\r\n  <div class=\"section animate\">\r\n    <div class=\"general d-flex jc-center\">\r\n      <div class=\"container d-flex m-col first-screen m-jc-center fd-row ai-end jc-center mp-tb-3\">\r\n        <ArchiveItems />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Каталог -->\r\n    <section class=\"d-flex fd-column ai-center jc-center p-1 p-relative\">\r\n      <div class=\"container d-flex fd-column p-1 pm-0\">\r\n        <div class=\"d-flex fd-column jc-space ai-center z-index-1\">\r\n          <StatisticsForm />\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- Лайтбокс с созданием элемента -->\r\n    <section class=\"d-flex fd-column ai-center jc-center p-1 p-relative\">\r\n\r\n      <div class=\"d-flex fd-column p-1 ai-center z-index-1\">\r\n        <!-- <AddItem @open-lightbox=\"openLightbox\"/> -->\r\n      </div>\r\n    </section>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\nimport ArchiveItems from '@/components/ui/ArchiveItems.vue';\r\n// import AddItem from '@/components/AddItem.vue';\r\n\r\nexport default {\r\n  components: {\r\n    // AddItem,\r\n    ArchiveItems,\r\n  },\r\n  setup() {\r\n\r\n    const isLightboxOpen = ref(false);\r\n    const lightboxImageSrc = ref('');\r\n\r\n    const openLightbox = (imageSrc) => {\r\n      isLightboxOpen.value = true;\r\n      lightboxImageSrc.value = imageSrc;\r\n    };\r\n\r\n    const closeLightbox = () => {\r\n      isLightboxOpen.value = false;\r\n      lightboxImageSrc.value = '';\r\n    };\r\n\r\n    return { \r\n      isLightboxOpen,\r\n      lightboxImageSrc,\r\n      openLightbox,\r\n      closeLightbox\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","<template>\r\n  <div class=\"catalog\">\r\n    <h1 class=\"m-b-2\">Сделки компании</h1>\r\n\r\n    <div class=\"ads-list\">\r\n      <div v-for=\"deal in deals\" :key=\"deal.id\" class=\"ad-item\">\r\n        <img :src=\"deal.photos ? deal.photos[0] : 'https://via.placeholder.com/150'\" alt=\"Фото сделки\" class=\"ad-photo\" />\r\n        <div class=\"ad-details\">\r\n          <h3>{{ deal.name }}</h3>\r\n          <p>Бюджет: {{ deal.price }} ₽</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue';\r\nimport { useApi } from '@/services/api/api.js';\r\n\r\nexport default {\r\n  setup() {\r\n    const deals = ref([]); \r\n    const { fetchDeals } = useApi(); \r\n\r\n    const fetchItems = async () => {\r\n      try {\r\n        const response = await fetchDeals();\r\n        deals.value = response.data;\r\n      } catch (error) {\r\n        console.error('Ошибка загрузки сделок:', error);\r\n      }\r\n    };\r\n\r\n    onMounted(fetchItems);\r\n\r\n    return {\r\n      deals,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.catalog {\r\n  max-width: 1200px;\r\n  margin: 40px auto;\r\n  padding: 20px;\r\n}\r\n\r\n.ads-list {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\r\n  gap: 20px;\r\n}\r\n\r\n.ad-item {\r\n  border: 1px solid #ccc;\r\n  padding: 15px;\r\n  text-align: center;\r\n  border-radius: 10px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.ad-photo {\r\n  width: 100%;\r\n  height: 150px;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n}\r\n\r\n.ad-details {\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n","const tokenService = {\r\n    client_id: 'a5a49978-60b4-45e5-9fac-8af6887d9602',\r\n    client_secret: '1pWapg0P0mww8j08HCOo4nMpsgg69WGFB36UppRUY8J5lsCAveSFS0UTxatFTt8X',\r\n    grant_type: 'authorization_code',\r\n    code: 'def50200b853b0d87ec84691ea1e4e27f9d4d94d2b3b8a7a2bbef15c7fddd4386df22cc70a4dae42c5c370e03c4d8df785b1132b12debce7235d7973d0d5b62717f8851fb8f5cd89626aab90ce23da751c2fc24213ca7a7d931fd41998f34d670baa783324648ed677502c3886724221d4cd7578709172e63de25161bcf8be4d2650026a016b91f1bc2e3991fa713ebf22ff817890bbdb69d84c530b127c5fef2c4baf8f598c58eb71f35ed3578eafdbf3804dc2e7d518086b0ea4d2cfa6d3847a15d47f6687b46a0ef8853a80c61cc688262504473777245ea1f165000d4c45776176beb2c20c2bc5ce3a00191f08ea0acd1244c3baee5cd2325315e5c089ad0261cfb45188ce6cff88c13dd9cff186775881470de0213cca98ea5423e9fd931f8d1bb6a97bd8acb5b5832786a3788119614f3fe742a698d647d0b21d617aaa6fc000046caf21279f32602f8b0fcd2388c96e9e21572ce6fa94d916aab05b7af04970492f4de991e6773f690b4fbbc469e27aabf52f8caebebc373d2fcc69e68d2042031944d6ac0bd1fd705b64c6e8a71a65932434f4d1b4c649cccedbdc70c85cd741266123aff9641ddefc712a330784375bb192bf98d555622a9b87f47e3379715851c16a1a5d7c826df871bf375009f1c236632ed58d4f0e88c6d748eaceeef0555acda10f0fa847b637b877d14dfa66db96727e9185dbcb75e16ecb43a8a22a8663385017a127e7',\r\n    redirect_uri: 'https://digitalbankger.github.io/amocrm_integrations/#/',\r\n\r\n  \r\n    async fetchAccessToken() {\r\n      const response = await fetch('https://bkmzenbkmzen.amocrm.ru/oauth2/access_token', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          client_id: this.client_id,\r\n          client_secret: this.client_secret,\r\n          grant_type: 'refresh_token',\r\n          redirect_url: \"https://digitalbankger.github.io/amocrm_integrations/#/\",\r\n          refresh_token: this.refresh_token,\r\n        }),\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        throw new Error('Failed to get access token');\r\n      }\r\n  \r\n      const data = await response.json();\r\n  \r\n      this.tokenInfo = {\r\n        access_token: data.access_token,\r\n        refresh_token: data.refresh_token,\r\n        expires_in: data.expires_in,\r\n        token_type: data.token_type,\r\n      };\r\n  \r\n      localStorage.setItem('access_token', data.access_token);\r\n      localStorage.setItem('refresh_token', data.refresh_token);\r\n  \r\n      return data.access_token;\r\n    },\r\n  \r\n    getStoredAccessToken() {\r\n      return localStorage.getItem('access_token');\r\n    },\r\n  \r\n    async ensureTokenIsValid() {\r\n      const token = this.getStoredAccessToken();\r\n      if (!token) {\r\n        return await this.fetchAccessToken();\r\n      }\r\n  \r\n      return token;\r\n    },\r\n};\r\n\r\nexport default tokenService;\r\n      ","import tokenService from '@/services/tokenService';\r\n\r\nconst baseUrl = 'https://bkmzenbkmzen.amocrm.ru/api';\r\n\r\nasync function fetchData(endpoint, options = {}) {\r\n  const accessToken = await tokenService.ensureTokenIsValid();\r\n\r\n  options.headers = {\r\n    ...options.headers,\r\n    Authorization: `Bearer ${accessToken}`,\r\n    'Content-Type': 'application/json',\r\n  };\r\n\r\n  const response = await fetch(`${baseUrl}${endpoint}`, options);\r\n\r\n  if (!response.ok) {\r\n    throw new Error(`Ошибка: ${response.statusText}`);\r\n  }\r\n\r\n  const contentType = response.headers.get('Content-Type');\r\n\r\n  if (contentType && contentType.includes('application/json')) {\r\n    return await response.json();\r\n  } else {\r\n    return await response.text();\r\n  }\r\n}\r\n\r\n// Получаю все сделки\r\nexport function fetchDeals() {\r\n  return fetchData(`/v4/leads`);\r\n}\r\n\r\n// Получаю сделку по ID\r\nexport function fetchDealById(id) {\r\n  return fetchData(`/v4/leads/${id}`);\r\n}\r\n\r\nexport function useApi() {\r\n  return {\r\n    fetchDeals,\r\n    fetchDealById,\r\n  };\r\n}\r\n","import { render } from \"./ArchiveItems.vue?vue&type=template&id=06855fec&scoped=true\"\nimport script from \"./ArchiveItems.vue?vue&type=script&lang=js\"\nexport * from \"./ArchiveItems.vue?vue&type=script&lang=js\"\n\nimport \"./ArchiveItems.vue?vue&type=style&index=0&id=06855fec&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-06855fec\"]])\n\nexport default __exports__","import { render } from \"./CatalogItems.vue?vue&type=template&id=7e89f78e\"\nimport script from \"./CatalogItems.vue?vue&type=script&lang=js\"\nexport * from \"./CatalogItems.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_ArchiveItems","_hoisted_4","_hoisted_5","_hoisted_6","_component_StatisticsForm","_hoisted_7","_Fragment","_renderList","$setup","deals","deal","key","id","src","photos","alt","_toDisplayString","name","price","tokenService","client_id","client_secret","grant_type","code","redirect_uri","fetchAccessToken","response","fetch","method","headers","body","JSON","stringify","this","redirect_url","refresh_token","ok","Error","data","json","tokenInfo","access_token","expires_in","token_type","localStorage","setItem","getStoredAccessToken","getItem","ensureTokenIsValid","token","baseUrl","async","fetchData","endpoint","options","accessToken","Authorization","statusText","contentType","get","includes","text","fetchDeals","fetchDealById","useApi","setup","ref","fetchItems","value","error","console","onMounted","__exports__","components","ArchiveItems","isLightboxOpen","lightboxImageSrc","openLightbox","imageSrc","closeLightbox","render"],"sourceRoot":""}