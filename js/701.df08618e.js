"use strict";(self["webpackChunkmy_vue_app"]=self["webpackChunkmy_vue_app"]||[]).push([[701],{5701:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var s=n(3396);const c={class:"section animate"},i={class:"general d-flex jc-center"},a={class:"container d-flex m-col first-screen m-jc-center fd-row ai-end jc-center mp-tb-3"},o={class:"d-flex fd-column ai-center jc-center p-1 p-relative"},r={class:"container d-flex fd-column p-1 pm-0"},l={class:"d-flex fd-column jc-space ai-center z-index-1"},d=(0,s._)("section",{class:"d-flex fd-column ai-center jc-center p-1 p-relative"},[(0,s._)("div",{class:"d-flex fd-column p-1 ai-center z-index-1"})],-1);function h(e,t,n,h,p,m){const I=(0,s.up)("ArchiveItems"),f=(0,s.up)("StatisticsForm");return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",i,[(0,s._)("div",a,[(0,s.Wm)(I)])]),(0,s._)("section",o,[(0,s._)("div",r,[(0,s._)("div",l,[(0,s.Wm)(f)])])]),d])}var p=n(4870),m=n(7139);const I=e=>((0,s.dD)("data-v-06855fec"),e=e(),(0,s.Cn)(),e),f={class:"catalog"},u=I((()=>(0,s._)("h1",{class:"m-b-2"},"Сделки компании",-1))),k={class:"ads-list"},_=["src"],v={class:"ad-details"};function M(e,t,n,c,i,a){return(0,s.wg)(),(0,s.iD)("div",f,[u,(0,s._)("div",k,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.deals,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"ad-item"},[(0,s._)("img",{src:e.photos?e.photos[0]:"https://via.placeholder.com/150",alt:"Фото сделки",class:"ad-photo"},null,8,_),(0,s._)("div",v,[(0,s._)("h3",null,(0,m.zw)(e.name),1),(0,s._)("p",null,"Бюджет: "+(0,m.zw)(e.price)+" ₽",1)])])))),128))])])}const T={client_id:"a5a49978-60b4-45e5-9fac-8af6887d9602",client_secret:"1pWapg0P0mww8j08HCOo4nMpsgg69WGFB36UppRUY8J5lsCAveSFS0UTxatFTt8X",refresh_token:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImIwNDQyMDI0MTExNGIyY2EwYzQzYmJmYTRkY2RhNWZkNjcxNGU0MTMxNzE3ZjMyYzliN2U5MTA5OWVhYTg2MmQxZTlkM2FhZTQ3NjJkNTkzIn0.eyJhdWQiOiJhNWE0OTk3OC02MGI0LTQ1ZTUtOWZhYy04YWY2ODg3ZDk2MDIiLCJqdGkiOiJiMDQ0MjAyNDExMTRiMmNhMGM0M2JiZmE0ZGNkYTVmZDY3MTRlNDEzMTcxN2YzMmM5YjdlOTEwOTllYWE4NjJkMWU5ZDNhYWU0NzYyZDU5MyIsImlhdCI6MTcyNTg3NTQ2NiwibmJmIjoxNzI1ODc1NDY2LCJleHAiOjE3MjYwMTI4MDAsInN1YiI6IjExNDkyNDU4IiwiZ3JhbnRfdHlwZSI6IiIsImFjY291bnRfaWQiOjMxOTM5ODk0LCJiYXNlX2RvbWFpbiI6ImFtb2NybS5ydSIsInZlcnNpb24iOjIsInNjb3BlcyI6WyJjcm0iLCJmaWxlcyIsImZpbGVzX2RlbGV0ZSIsIm5vdGlmaWNhdGlvbnMiLCJwdXNoX25vdGlmaWNhdGlvbnMiXSwiaGFzaF91dWlkIjoiMTI1ZmQ5ZmYtNTc1Mi00YWQxLWIxMDctYTJiZjlmZTIxMmRlIiwiYXBpX2RvbWFpbiI6ImFwaS1iLmFtb2NybS5ydSJ9.SklgTC8VS1OkpBIJSZvyB6ttTVMkxfQYxrNqyOvbqMOirMZOevxgq_yBzwOVfZ-154t4q6dbVL1WKrERw2decj50B7isILygmm0Md3H_rYY5vC2jlPgMBM3ZSdAKBLo4WwpSFT54lTwnbraNte8tcwC-2J4GYYdLN0KovQ7f7vZsV786G825CnBrNla-Q8tM4eQ_fgBHW9Tvi1YozSYRuuhEZQUS-5vnehTcU4ZEs2mtttIHMyCr70tUrGUf3KE1NySmSjCu77NMlswp4W-fw_m-9EALFCb4yy-EOk4uxf15camHJhMGq16ndNIjnR097wqpozaxicrk3ieCVW4wRA",tokenInfo:null,async fetchAccessToken(){const e=await fetch("/api/oauth2/access_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:this.client_id,client_secret:this.client_secret,grant_type:"refresh_token",redirect_url:"",refresh_token:this.refresh_token})});if(!e.ok)throw new Error("Failed to get access token");const t=await e.json();return this.tokenInfo={access_token:t.access_token,refresh_token:t.refresh_token,expires_in:t.expires_in,token_type:t.token_type},localStorage.setItem("access_token",t.access_token),localStorage.setItem("refresh_token",t.refresh_token),t.access_token},getStoredAccessToken(){return localStorage.getItem("access_token")},async ensureTokenIsValid(){const e=this.getStoredAccessToken();return e||await this.fetchAccessToken()}};var N=T;const w="/api";async function y(e,t={}){const n=await N.ensureTokenIsValid();t.headers={...t.headers,Authorization:`Bearer ${n}`,"Content-Type":"application/json"};const s=await fetch(`${w}${e}`,t);if(!s.ok)throw new Error(`Ошибка: ${s.statusText}`);const c=s.headers.get("Content-Type");return c&&c.includes("application/json")?await s.json():await s.text()}function x(){return y("/v4/leads")}function Y(e){return y(`/v4/leads/${e}`)}function b(){return{fetchDeals:x,fetchDealById:Y}}var g={setup(){const e=(0,p.iH)([]),{fetchDeals:t}=b(),n=async()=>{try{const n=await t();e.value=n.data}catch(n){console.error("Ошибка загрузки сделок:",n)}};return(0,s.bv)(n),{deals:e}}},j=n(89);const S=(0,j.Z)(g,[["render",M],["__scopeId","data-v-06855fec"]]);var Z=S,W={components:{ArchiveItems:Z},setup(){const e=(0,p.iH)(!1),t=(0,p.iH)(""),n=n=>{e.value=!0,t.value=n},s=()=>{e.value=!1,t.value=""};return{isLightboxOpen:e,lightboxImageSrc:t,openLightbox:n,closeLightbox:s}}};const O=(0,j.Z)(W,[["render",h]]);var D=O}}]);
//# sourceMappingURL=701.df08618e.js.map